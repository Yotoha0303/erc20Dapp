# é¡¹ç›®åç§°ï¼šERC20 + å‰ç«¯ DApp é¡¹ç›®

## é¡¹ç›®æ¦‚è¿°ï¼ˆè¡¥å……ï¼‰

æœ¬é¡¹ç›®ä¸ºåŸºäº ERC20 åˆçº¦çš„å‰ç«¯ DAppï¼Œæ—¨åœ¨æ¨¡æ‹Ÿä»£å¸å‘è¡Œä¸ç®¡ç†æµç¨‹ï¼Œå…·å¤‡é“¾ä¸Šå‘å¸ã€æˆæƒè½¬è´¦ã€é”€æ¯ç­‰åŠŸèƒ½ï¼Œæ¶µç›–åŸºç¡€äº¤äº’ã€å®‰å…¨æ€§æµ‹è¯•ä»¥åŠå·¥ç¨‹åŒ–éƒ¨ç½²ï¼Œæ»¡è¶³çœŸå®ä¸šåŠ¡å¼€å‘åœºæ™¯ã€‚

**å®ç°æ€è·¯**ï¼šé€šè¿‡openzeppelinå’ŒERC20æ„å»ºåˆçº¦ï¼Œç»è¿‡foundryè¿›è¡Œæµ‹è¯•åï¼Œä½¿ç”¨react+viteæ„å»ºå‰ç«¯ï¼Œå®ç°metamaskè¿æ¥ï¼Œå®Œæˆè½¬è´¦ã€æˆæƒã€é“¸é€ å’Œé”€æ¯ã€‚

ç‰¹æ®Šå†…å®¹è¯´æ˜ï¼š

1ã€æˆæƒå’Œé“¸é€ åªèƒ½ç”±åˆçº¦æä¾›è€…ä½¿ç”¨ï¼Œå…¶ä»–ç”¨æˆ·ä¸å¯ä»¥ä½¿ç”¨ã€‚

2ã€ç”¨æˆ·åœ¨æˆæƒä»£å¸æ—¶ï¼Œæœ‰ä¸¤ç§å¯èƒ½ã€‚

1ï¼‰ç›´æ¥æˆæƒå…¶ä»–ç”¨æˆ·ä½¿ç”¨è‡ªå·±çš„ä»£å¸

2ï¼‰æˆæƒä»£å¸åï¼Œç›´æ¥è½¬è´¦

**æŠ€æœ¯æ ˆ**ï¼š

| æŠ€æœ¯å·¥å…·       | ç‰ˆæœ¬                             | å·¥å…·ç”¨é€”           |
| -------------- | -------------------------------- | ------------------ |
| solidity       | 0.8.26                           | é¡¹ç›®åŸºç¡€æ„å»ºï¼Œåˆçº¦ |
| openzeppelin   | æœªçŸ¥ï¼ˆ20250422 --no-commitç‰ˆæœ¬ï¼‰ | åˆçº¦å®‰å…¨æ€§å·¥å…·     |
| foundry        | v5                               | åˆçº¦å®‰å…¨æ€§æµ‹è¯•     |
| ethers         | v6                               | é“¾ä¸Šäº¤äº’å·¥å…·       |
| react          | v19.0.0                          | å‰ç«¯æ¡†æ¶           |
| vite           | 6.3.1                            | å‰ç«¯æ„å»ºå·¥å…·       |
| ts(TypeScript) | 5.7.2                            | å‰ç«¯è„šæœ¬ç¼–ç¨‹       |
| tailwindcss     |                                  | å‰ç«¯æ ·å¼å¼€å‘       |

å…¶ä»–å·¥å…·:

alchemyã€metamaskã€github actions

**é¡¹ç›®æ­¥éª¤ï¼ˆç®€åŒ–ï¼‰**ï¼š

1ã€å¼€å‘åˆçº¦

2ã€å®‰å…¨æ€§æµ‹è¯•

3ã€å‰ç«¯æ„å»º

4ã€å®‰å…¨æ€§ä¼˜åŒ–ã€UIä¼˜åŒ–

5ã€é¡¹ç›®æ•´ä½“æµ‹è¯•

6ã€æ€»ç»“ï¼ˆé¡¹ç›®è¯´æ˜ã€é¡¹ç›®æ€»ç»“ï¼‰

**é¡¹ç›®æ­¥éª¤**ï¼š

1ã€åŸºäºERC20æ„å»ºåŠŸèƒ½åŸºç¡€

2ã€é€šè¿‡foundryæµ‹è¯•

3ã€ä½¿ç”¨react+vitæ„å»ºå‰ç«¯ï¼Œå¹¶å®ç°åŠŸèƒ½

4ã€åŠŸèƒ½æ€§æµ‹è¯•ã€å‰ç«¯é¡µé¢ä¼˜åŒ–ã€å·¥ç¨‹åŒ–æµ‹è¯•

**æ³¨æ„ï¼š**

1ã€åŠ ä¸€ä¸ªç®€å•çš„ â€œå¤šç­¾æˆæƒå‘å¸â€ or â€œåˆ†çº¢é€»è¾‘â€ï¼Œå‡¸æ˜¾ä½ **ç†è§£äº†å®é™…åœºæ™¯**ã€æ¨¡æ‹ŸçœŸå®å¼€å‘å’Œä¸šåŠ¡éœ€æ±‚ã€‘

2ã€åŠ ä¸Š **ERC20 å¸¸è§å®‰å…¨è€ƒç‚¹**ï¼ˆå¦‚ï¼šreentrancyã€front-running æ¨¡æ‹Ÿï¼‰ã€å®è·µå®‰å…¨è€ƒç‚¹ã€‘

**éœ€æ±‚ï¼š**

1ã€æ¸…æ™°çš„UIé¡µé¢

2ã€èƒ½å¤Ÿè¿æ¥MetaMaské’±åŒ…

3ã€é€šè¿‡anvil forkæ¼”ç¤ºï¼Œä¸miannetè¿›è¡Œäº¤äº’ï¼ˆæµ‹è¯•ç½‘ä»¥åŠä¸»ç½‘ï¼‰

4ã€ä½¿ç”¨æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Šï¼ˆ`forge coverage`ï¼‰ã€å¯é€‰ã€‘

**åŸéœ€æ±‚æè¿°ï¼š**

ç”¨ERC20å®ç°ä¸€ä¸ªdappï¼Œç”¨æˆ·èƒ½å¤Ÿè¿æ¥é’±åŒ…ï¼Œä¹Ÿèƒ½å¤Ÿåœ¨ä¸»ç½‘å’Œæµ‹è¯•ç½‘ä¸Šè¿›è¡Œåˆ‡æ¢ä½¿ç”¨ã€‚å½“è¿™æ¡é“¾ä¸Šæ²¡æœ‰åˆçº¦æ—¶ï¼Œè¦æé†’ç”¨æˆ·ã€‚

é¡¹ç›®çš„å…¶ä»–è¦æ±‚/åé¦ˆï¼š

1ã€å‰ç«¯è¦ä¼˜åŒ–ï¼ŒæŠŠç”¨æˆ·äº¤äº’çš„å—è¦æ”¾åˆ°ä¸­é—´ã€‚ï¼ˆåŸæ¥çš„äº¤äº’é¡µé¢æŠŠåŠŸèƒ½æ”¾åœ¨äº†å·¦è¾¹ï¼Œé‚£æ˜¯æ²¡æœ‰ä¼˜åŒ–å‰çš„ï¼‰

2ã€ç”¨æˆ·å¯ä»¥ç›´æ¥è¿æ¥é’±åŒ…ï¼Œéœ€è¦å°†ç™»å½•è®¾ç½®æˆä¸€ä¸ªæŒ‰é’®ï¼Œç”¨æˆ·å¯ä»¥éšæ—¶è¿›è¡Œè¿æ¥ã€‚è€Œä¸æ˜¯ä¸€å¼€å§‹åœ¨ç™»å½•åˆ°ç½‘ç«™æ—¶ï¼Œå°±ç›´æ¥è®©ç”¨æˆ·è¿æ¥é’±åŒ…ã€‚

3ã€é“¸é€ å’Œé”€æ¯åªèƒ½å¤Ÿåˆçº¦æä¾›è€…ç”¨ï¼Œå…¶ä»–ç”¨æˆ·ä¸å¯è§ã€‚

## æ¶æ„å›¾ï¼ˆè¡¥å……ï¼‰

```
[ç”¨æˆ·æµè§ˆå™¨]
    |
    |â€”â€” MetaMaskï¼ˆé’±åŒ…è¿æ¥ï¼‰
    |
[React å‰ç«¯]
    |
    |â€”â€” ethers.js
    |
[Alchemy RPC] â€”â€”> [Ethereumï¼ˆSepolia/Testnetï¼‰]
                     |
                     |â€”â€” ERC20 åˆçº¦ï¼ˆmint/burn/transferï¼‰
                     |â€”â€” åˆ†çº¢ / å¤šç­¾åˆçº¦ï¼ˆæ‰©å±•æ¨¡å—ï¼‰

```

## æµ‹è¯•è¦†ç›–è¯´æ˜ï¼ˆè¡¥å……ï¼‰

æ³¨æ„ï¼šç”¨äº†å“ªäº›æµ‹è¯•ç”¨ä¾‹ã€è¦†ç›–äº†å“ªäº›åŠŸèƒ½ã€æ˜¯å¦åŒ…å«å®‰å…¨æ€§æµ‹è¯•ï¼ˆå¦‚ expectRevertï¼‰

## **è§„èŒƒçš„éœ€æ±‚åˆ—è¡¨ï¼ˆè¡¥å……ï¼‰**

```
### ğŸ“‹ åŠŸèƒ½å¼€å‘æ¸…å•

- [x] åŸºç¡€ ERC20 åˆçº¦ï¼ˆmint / burn / transferï¼‰
- [x] æƒé™é™åˆ¶ï¼ˆonlyOwnerï¼‰
- [x] React å‰ç«¯æ­å»ºï¼ˆVite + TSï¼‰
- [x] MetaMask é’±åŒ…è¿æ¥
- [ ] å¤šç­¾å‘å¸åŠŸèƒ½æ¨¡å—ï¼ˆå¾…å®Œæˆï¼‰
- [x] åˆ†çº¢é€»è¾‘æ¨¡å—
- [ ] Reentrancy æ”»å‡»æ¨¡æ‹Ÿæµ‹è¯•ï¼ˆå¾…å®ç°ï¼‰
- [ ] Front-running é£é™©æµ‹è¯•ï¼ˆå¾…å®ç°ï¼‰
- [ ] UI ç•Œé¢ä¸­éƒ¨å¸ƒå±€ä¼˜åŒ–
- [ ] åŠ¨æ€é“¾çŠ¶æ€æç¤ºï¼ˆæ— åˆçº¦æ—¶æç¤ºï¼‰
```

## ç”¨æˆ·äº¤äº’æµç¨‹å›¾ï¼ˆè¡¥å……ï¼‰

æ³¨æ„ï¼šï¼ˆæ¨èç”¨å·¥å…·ï¼šdraw.ioï¼‰

æ¨¡æ‹Ÿç”¨æˆ·ä½¿ç”¨æµç¨‹ï¼š

```
textå¤åˆ¶ç¼–è¾‘ç”¨æˆ·æ‰“å¼€é¡µé¢
  â†“
ç‚¹å‡»â€œè¿æ¥é’±åŒ…â€
  â†“
é¡µé¢å±•ç¤ºè´¦æˆ·ä½™é¢
  â†“
[å¦‚æœæ˜¯ Owner]
â†’ å¯è§ Mint / Burn æŒ‰é’®
  â†“
ç‚¹å‡»æ“ä½œ â†’ è§¦å‘åˆçº¦ â†’ æˆåŠŸæç¤º
```





# å‰ç«¯æ„å»º

```
npm create vite@latest frontend -- --template react-ts

cd frontend
npm install

//å®‰è£…ä¾èµ–
npm install ethers

//å¯é€‰ï¼‰å»ºè®®å®‰è£… MetaMask å·¥å…·åº“ä»¥ä¾¿ä¸ EIP-1193 Provider äº¤äº’ï¼š
npm install @metamask/detect-provider


//é¡¹ç›®ç»“æ„
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/        # UIç»„ä»¶
â”‚   â”œâ”€â”€ hooks/             # è‡ªå®šä¹‰é’±åŒ…è¿æ¥ Hook
â”‚   â”œâ”€â”€ utils/             # åˆçº¦åŠ è½½ã€å¸¸é‡å®šä¹‰
â”‚   â”œâ”€â”€ contracts/         # åˆçº¦ ABI + åœ°å€
â”‚   â””â”€â”€ App.tsx            # ä¸»ç»„ä»¶
â”œâ”€â”€ public/
â”œâ”€â”€ package.json
â””â”€â”€ vite.config.ts

```

å¤‡æ³¨ï¼šåˆçº¦åœ°å€0xa39cf46d34aceE32C936ba6B9E5bA2221b9e7632

# openzeppeliné€Ÿè®°
```
forge install OpenZeppelin/openzeppelin-contracts-upgradeable --no-commit
forge install OpenZeppelin/openzeppelin-foundry-upgrades --no-commit
```

